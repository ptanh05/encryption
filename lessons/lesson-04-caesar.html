<!doctype html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>B√†i 4: Caesar Cipher</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/fontello.css">
    <link rel="stylesheet" href="../css/design-system.css">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/lesson-styles.css">
    <link rel="stylesheet" href="../css/animations.css">
    <link rel="stylesheet" href="../css/responsive.css">
</head>
<body class="lesson scheme-caesar" data-lesson="4" onload="setup( CAESAR );">
    <nav class="lesson-nav">
        <a href="../index.html">‚Üê V·ªÅ trang ch·ªß</a>
        <div class="lesson-progress-bar">
            <div class="progress-fill"></div>
        </div>
    </nav>

    <header class="lesson-header">
        <h1>B√†i 4: Caesar Cipher <a target="_blank" href="https://en.wikipedia.org/wiki/Caesar_cipher"><i class="icon-link-ext"></i></a></h1>
        <p class="lesson-meta">
            <span>‚è±Ô∏è Th·ªùi gian: ~20 ph√∫t</span>
            <span>‚≠ê ƒê·ªô kh√≥: D·ªÖ</span>
            <span>üìö Module 2: M√£ h√≥a C·ªï ƒëi·ªÉn</span>
        </p>
    </header>

    <main class="lesson-content">
        <section class="theory">
            <h2>üìñ L√Ω thuy·∫øt</h2>
            
            <h3>L·ªãch s·ª≠</h3>
            <p>
                <strong>Caesar Cipher</strong> l√† m·ªôt trong nh·ªØng ph∆∞∆°ng ph√°p m√£ h√≥a l√¢u ƒë·ªùi nh·∫•t, 
                ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi Julius Caesar h∆°n 2000 nƒÉm tr∆∞·ªõc ƒë·ªÉ g·ª≠i th√¥ng ƒëi·ªáp b√≠ m·∫≠t cho 
                c√°c ch·ªâ huy qu√¢n ƒë·ªôi c·ªßa m√¨nh.
            </p>

            <h3>C√°ch ho·∫°t ƒë·ªông</h3>
            <p>
                Caesar Cipher l√† m·ªôt d·∫°ng <strong>substitution cipher</strong> ƒë∆°n gi·∫£n, d·ªãch chuy·ªÉn 
                m·ªói ch·ªØ c√°i trong b·∫£ng ch·ªØ c√°i ƒëi m·ªôt s·ªë v·ªã tr√≠ c·ªë ƒë·ªãnh (g·ªçi l√† "shift" ho·∫∑c "key").
            </p>

            <div class="example-box">
                <strong>V√≠ d·ª• v·ªõi shift = 3:</strong>
                <br>Plaintext:  A B C D E F G H I J K L M N O P Q R S T U V W X Y Z
                <br>Ciphertext: D E F G H I J K L M N O P Q R S T U V W X Y Z A B C
                <br>
                <br>"HELLO" ‚Üí "KHOOR"
            </div>

            <h3>ROT-13</h3>
            <p>
                ROT-13 l√† m·ªôt tr∆∞·ªùng h·ª£p ƒë·∫∑c bi·ªát c·ªßa Caesar Cipher v·ªõi shift = 13. V√¨ b·∫£ng ch·ªØ c√°i 
                c√≥ 26 ch·ªØ c√°i, n√™n m√£ h√≥a 2 l·∫ßn v·ªõi ROT-13 s·∫Ω tr·∫£ v·ªÅ vƒÉn b·∫£n g·ªëc (t·ª± ƒë·∫£o ng∆∞·ª£c).
            </p>

            <h3>Brute Force Attack</h3>
            <p>
                Caesar Cipher r·∫•t d·ªÖ b·ªã t·∫•n c√¥ng b·∫±ng ph∆∞∆°ng ph√°p brute force v√¨ ch·ªâ c√≥ 25 kh·∫£ nƒÉng 
                shift (0-25). K·∫ª t·∫•n c√¥ng ch·ªâ c·∫ßn th·ª≠ t·ª´ng kh·∫£ nƒÉng cho ƒë·∫øn khi t√¨m ra vƒÉn b·∫£n c√≥ nghƒ©a.
            </p>

            <div class="demo-container" style="margin: 1rem 0;">
                <h4>Th·ª≠ Brute Force:</h4>
                <input type="text" id="brute-input" placeholder="Nh·∫≠p ciphertext..." 
                       style="width: 100%; padding: 0.5rem; margin-bottom: 0.5rem;">
                <button onclick="bruteForce()" class="demo-btn">Th·ª≠ t·∫•t c·∫£ 25 kh·∫£ nƒÉng</button>
                <div id="brute-results" style="margin-top: 1rem;"></div>
            </div>
        </section>

        <section class="interactive-demo">
            <h2>üéÆ Th·ª≠ nghi·ªám</h2>
            
            <div id="inputs">
                <div id="plaintext" class="group">
                    <h3>Plain Text</h3>
                    <input type="text" id="plaintext-text" class="plaintext-text">
                </div>

                <div id="options" class="group">
                    <h3 class="key">Key (Shift)</h3>
                    <input type="number" id="key-value" class="key-value" value="0" min="0" max="25">
                </div>
        
                <div id="cyphertext" class="group">
                    <h3 class="cypher">Cypher Text</h3>
                    <input type="text" id="cyphertext-text" class="cyphertext-text">
                </div>
            </div>

            <section id="encryption">
                <h2>Encryption System</h2>
                
                <div id="crypt-plaintext" class="group block">
                    <h3>Plain Letter</h3>
                    <div id="plaintext-chars" class="grid"></div>
                </div>

                <div id="crypt-mapping" class="group block">
                    <h3 id="mapping-direction">Encrypts To</h3>
                    <div id="mapping" class="grid"></div>
                </div>

                <div id="crypt-cyphertext" class="group block">
                    <h3 class="cypher">Cypher Letter</h3>
                    <div id="cyphertext-chars" class="grid"></div>
                </div>
            </section>

            <section id="charts">
                <h2>Frequency Analysis</h2>

                <div id="plaintext-freq" class="group">
                    <h3>Plain Text Letter Frequency</h3>
                    <div id="plaintext-chart" class="chart"></div>
                </div>

                <div id="cyphertext-freq" class="group">
                    <h3 class="cypher">Cypher Text Letter Frequency</h3>
                    <div id="cyphertext-chart" class="chart"></div>
                </div>
            </section>
        </section>

        <section class="quiz">
            <h2>üìù Ki·ªÉm tra ki·∫øn th·ª©c</h2>
            <div class="quiz-questions"></div>
            <button class="quiz-submit">N·ªôp b√†i</button>
            <div class="quiz-score"></div>
        </section>

        <section class="challenge">
            <h2>üéØ Th·ª≠ th√°ch</h2>
            <p>Ho√†n th√†nh c√°c th·ª≠ th√°ch sau:</p>
            <div class="challenges-list"></div>
        </section>
    </main>

    <footer class="lesson-footer">
        <button class="btn-prev" onclick="window.location.href='lesson-03-pigpen.html'">‚Üê B√†i tr∆∞·ªõc</button>
        <button class="btn-next" onclick="window.location.href='lesson-05-vigenere.html'">B√†i ti·∫øp theo ‚Üí</button>
    </footer>

    <script src="../js/crypt-util.js"></script>
    <script src="../js/crypt-simple.js"></script>
    <script src="../js/lesson-core.js"></script>
    <script>
        LessonCore.currentLesson = 4;
        LessonCore.updateLessonProgressBar();
        QuizSystem.init(4);
        ChallengeSystem.init(4);

        function bruteForce() {
            const ciphertext = document.getElementById('brute-input').value.toUpperCase();
            if (!ciphertext) return;

            const results = document.getElementById('brute-results');
            results.innerHTML = '<h4>T·∫•t c·∫£ c√°c kh·∫£ nƒÉng:</h4>';

            for (let shift = 0; shift < 26; shift++) {
                let plaintext = '';
                for (let i = 0; i < ciphertext.length; i++) {
                    const char = ciphertext[i];
                    if (char >= 'A' && char <= 'Z') {
                        const shifted = ((char.charCodeAt(0) - 65 - shift + 26) % 26) + 65;
                        plaintext += String.fromCharCode(shifted);
                    } else {
                        plaintext += char;
                    }
                }
                const div = document.createElement('div');
                div.style.padding = '0.5rem';
                div.style.margin = '0.3rem 0';
                div.style.background = shift % 2 === 0 ? 'var(--border-dark)' : 'var(--back-high)';
                div.innerHTML = `<strong>Shift ${shift}:</strong> ${plaintext}`;
                results.appendChild(div);
            }
        }

        const originalCheck = QuizSystem.checkAnswers.bind(QuizSystem);
        QuizSystem.checkAnswers = function() {
            const score = originalCheck();
            if (score >= 70) {
                LessonCore.markLessonComplete(4, score);
            }
        };
    </script>
</body>
</html>

