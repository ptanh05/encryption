<!doctype html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>B√†i 11: ·ª®ng d·ª•ng th·ª±c t·∫ø</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/fontello.css">
    <link rel="stylesheet" href="../css/design-system.css">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/lesson-styles.css">
    <link rel="stylesheet" href="../css/animations.css">
    <link rel="stylesheet" href="../css/responsive.css">
</head>
<body class="lesson" data-lesson="11">
    <nav class="lesson-nav">
        <a href="../index.html">‚Üê V·ªÅ trang ch·ªß</a>
        <div class="lesson-progress-bar">
            <div class="progress-fill"></div>
        </div>
    </nav>

    <header class="lesson-header">
        <h1>B√†i 11: ·ª®ng d·ª•ng th·ª±c t·∫ø</h1>
        <p class="lesson-meta">
            <span>‚è±Ô∏è Th·ªùi gian: ~40 ph√∫t</span>
            <span>‚≠ê ƒê·ªô kh√≥: Kh√≥</span>
            <span>üìö Module 5: ·ª®ng d·ª•ng th·ª±c t·∫ø</span>
        </p>
    </header>

    <main class="lesson-content">
        <section class="theory">
            <h2>üìñ L√Ω thuy·∫øt</h2>
            
            <h3>HTTPS v√† TLS</h3>
            <p>
                <strong>HTTPS</strong> (HyperText Transfer Protocol Secure) l√† phi√™n b·∫£n b·∫£o m·∫≠t c·ªßa HTTP, 
                s·ª≠ d·ª•ng TLS/SSL ƒë·ªÉ m√£ h√≥a d·ªØ li·ªáu gi·ªØa browser v√† server.
            </p>

            <h4>TLS Handshake Process:</h4>
            <ol>
                <li>Client g·ª≠i "Client Hello" v·ªõi supported cipher suites</li>
                <li>Server g·ª≠i "Server Hello" v·ªõi chosen cipher suite + certificate</li>
                <li>Client x√°c th·ª±c certificate</li>
                <li>Client t·∫°o pre-master secret, m√£ h√≥a b·∫±ng server's public key</li>
                <li>C·∫£ hai b√™n t√≠nh master secret t·ª´ pre-master secret</li>
                <li>B·∫Øt ƒë·∫ßu m√£ h√≥a d·ªØ li·ªáu v·ªõi symmetric key</li>
            </ol>

            <h3>Password Hashing</h3>
            <p>
                M·∫≠t kh·∫©u kh√¥ng bao gi·ªù ƒë∆∞·ª£c l∆∞u d·∫°ng plaintext. Thay v√†o ƒë√≥, l∆∞u hash c·ªßa m·∫≠t kh·∫©u.
            </p>
            <ul>
                <li><strong>Salt:</strong> Random data th√™m v√†o password tr∆∞·ªõc khi hash</li>
                <li><strong>Pepper:</strong> Secret key th√™m v√†o password</li>
                <li><strong>Key derivation:</strong> PBKDF2, bcrypt, Argon2</li>
            </ul>

            <h3>Blockchain v√† Cryptocurrency</h3>
            <p>
                Blockchain s·ª≠ d·ª•ng cryptography ƒë·ªÉ:
            </p>
            <ul>
                <li><strong>Hash chains:</strong> M·ªói block ch·ª©a hash c·ªßa block tr∆∞·ªõc</li>
                <li><strong>Digital signatures:</strong> X√°c th·ª±c giao d·ªãch</li>
                <li><strong>Proof of Work:</strong> Mining process</li>
            </ul>

            <h3>End-to-End Encryption</h3>
            <p>
                E2EE ƒë·∫£m b·∫£o ch·ªâ ng∆∞·ªùi g·ª≠i v√† ng∆∞·ªùi nh·∫≠n m·ªõi c√≥ th·ªÉ ƒë·ªçc th√¥ng ƒëi·ªáp, 
                ngay c·∫£ nh√† cung c·∫•p d·ªãch v·ª• c≈©ng kh√¥ng th·ªÉ.
            </p>
            <div class="example-box">
                <strong>V√≠ d·ª•:</strong> WhatsApp, Signal s·ª≠ d·ª•ng E2EE
            </div>
        </section>

        <section class="interactive-demo">
            <h2>üéÆ Th·ª≠ nghi·ªám</h2>
            
            <h3>TLS Handshake Simulator</h3>
            <div class="demo-container">
                <button class="demo-btn" onclick="simulateTLS()">B·∫Øt ƒë·∫ßu TLS Handshake</button>
                <div id="tls-steps" style="margin-top: 1rem;"></div>
            </div>

            <h3>Password Security Checker</h3>
            <div class="demo-container">
                <div class="demo-group">
                    <label>Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ki·ªÉm tra:</label>
                    <input type="password" id="password-check" placeholder="Nh·∫≠p m·∫≠t kh·∫©u...">
                </div>
                <button class="demo-btn" onclick="checkPassword()">Ki·ªÉm tra</button>
                <div id="password-result" style="margin-top: 1rem;"></div>
            </div>

            <h3>Blockchain Hash Chain Demo</h3>
            <div class="demo-container">
                <div class="demo-group">
                    <label>Block Data:</label>
                    <input type="text" id="block-data" placeholder="Nh·∫≠p d·ªØ li·ªáu block...">
                </div>
                <div class="demo-group">
                    <label>Previous Hash:</label>
                    <input type="text" id="prev-hash" placeholder="Hash c·ªßa block tr∆∞·ªõc..." readonly>
                </div>
                <button class="demo-btn" onclick="createBlock()">T·∫°o Block</button>
                <div id="blockchain-result" style="margin-top: 1rem;"></div>
            </div>
        </section>

        <section class="quiz">
            <h2>üìù Ki·ªÉm tra ki·∫øn th·ª©c</h2>
            <div class="quiz-questions"></div>
            <button class="quiz-submit">N·ªôp b√†i</button>
            <div class="quiz-score"></div>
        </section>

        <section class="challenge">
            <h2>üéØ T·ªïng k·∫øt kh√≥a h·ªçc</h2>
            <p>Ch√∫c m·ª´ng b·∫°n ƒë√£ ho√†n th√†nh kh√≥a h·ªçc! H√£y l√†m b√†i ki·ªÉm tra cu·ªëi c√πng:</p>
            <div class="completion-certificate" style="text-align: center; padding: 2rem; background: var(--border-dark); border-radius: 0.5rem; margin-top: 1rem;">
                <h3>üéì Ch·ª©ng ch·ªâ ho√†n th√†nh</h3>
                <p>B·∫°n ƒë√£ ho√†n th√†nh 11 b√†i h·ªçc v·ªÅ M·∫≠t m√£ h·ªçc!</p>
                <button class="demo-btn" onclick="generateCertificate()">T·∫°o ch·ª©ng ch·ªâ</button>
                <div id="certificate-content" style="margin-top: 1rem;"></div>
            </div>
        </section>
    </main>

    <footer class="lesson-footer">
        <button class="btn-prev" onclick="window.location.href='lesson-10-hash-signatures.html'">‚Üê B√†i tr∆∞·ªõc</button>
        <button class="btn-next" onclick="window.location.href='../index.html'">V·ªÅ trang ch·ªß ‚Üí</button>
    </footer>

    <script src="../js/crypt-util.js"></script>
    <script src="../js/lesson-core.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.js"></script>
    <script>
        LessonCore.currentLesson = 11;
        LessonCore.updateLessonProgressBar();
        QuizSystem.init(11);

        let previousHash = '0';
        let blockNumber = 0;

        function simulateTLS() {
            const steps = [
                '1. Client ‚Üí Server: Client Hello (supported ciphers)',
                '2. Server ‚Üí Client: Server Hello (chosen cipher) + Certificate',
                '3. Client: Verify certificate',
                '4. Client ‚Üí Server: Pre-master secret (encrypted with server public key)',
                '5. Both: Calculate master secret',
                '6. Both: Generate session keys',
                '7. ‚úì Secure connection established!'
            ];

            const container = document.getElementById('tls-steps');
            container.innerHTML = '<h4>TLS Handshake Steps:</h4><ol>';
            steps.forEach((step, index) => {
                setTimeout(() => {
                    const li = document.createElement('li');
                    li.textContent = step;
                    li.style.padding = '0.5rem';
                    li.style.background = index % 2 === 0 ? 'var(--border-dark)' : 'var(--back-high)';
                    container.querySelector('ol').appendChild(li);
                }, index * 1000);
            });
        }

        function checkPassword() {
            const password = document.getElementById('password-check').value;
            if (!password) return;

            let strength = 0;
            let feedback = [];

            if (password.length >= 8) strength++;
            else feedback.push('M·∫≠t kh·∫©u n√™n c√≥ √≠t nh·∫•t 8 k√Ω t·ª±');

            if (/[a-z]/.test(password)) strength++;
            else feedback.push('Th√™m ch·ªØ th∆∞·ªùng');

            if (/[A-Z]/.test(password)) strength++;
            else feedback.push('Th√™m ch·ªØ hoa');

            if (/[0-9]/.test(password)) strength++;
            else feedback.push('Th√™m s·ªë');

            if (/[^a-zA-Z0-9]/.test(password)) strength++;
            else feedback.push('Th√™m k√Ω t·ª± ƒë·∫∑c bi·ªát');

            let rating = 'R·∫•t y·∫øu';
            let color = 'red';
            if (strength >= 4) {
                rating = 'M·∫°nh';
                color = 'green';
            } else if (strength >= 3) {
                rating = 'Trung b√¨nh';
                color = 'orange';
            } else if (strength >= 2) {
                rating = 'Y·∫øu';
                color = 'orange';
            }

            const hash = CryptoJS.SHA256(password).toString();
            document.getElementById('password-result').innerHTML = `
                <p><strong>ƒê·ªô m·∫°nh:</strong> <span style="color: ${color}">${rating}</span> (${strength}/5)</p>
                <p><strong>Hash (SHA-256):</strong> <code style="word-break: break-all;">${hash}</code></p>
                ${feedback.length > 0 ? '<p><strong>G·ª£i √Ω:</strong> ' + feedback.join(', ') + '</p>' : ''}
            `;
        }

        function createBlock() {
            const data = document.getElementById('block-data').value;
            if (!data) return;

            blockNumber++;
            const timestamp = new Date().toISOString();
            const blockData = {
                number: blockNumber,
                data: data,
                previousHash: previousHash,
                timestamp: timestamp
            };

            const blockString = JSON.stringify(blockData);
            const hash = CryptoJS.SHA256(blockString).toString();
            previousHash = hash;

            document.getElementById('prev-hash').value = hash;

            const result = document.getElementById('blockchain-result');
            const blockDiv = document.createElement('div');
            blockDiv.style.padding = '1rem';
            blockDiv.style.margin = '0.5rem 0';
            blockDiv.style.background = 'var(--border-dark)';
            blockDiv.style.borderRadius = '0.3rem';
            blockDiv.innerHTML = `
                <h4>Block #${blockNumber}</h4>
                <p><strong>Data:</strong> ${data}</p>
                <p><strong>Previous Hash:</strong> <code>${blockData.previousHash}</code></p>
                <p><strong>Hash:</strong> <code style="word-break: break-all;">${hash}</code></p>
            `;
            result.appendChild(blockDiv);
        }

        function generateCertificate() {
            const progress = LessonCore.progress;
            let completed = 0;
            for (let i = 1; i <= 11; i++) {
                if (progress[i] && progress[i].completed) completed++;
            }

            const certificate = document.getElementById('certificate-content');
            certificate.innerHTML = `
                <div style="border: 3px solid var(--accent); padding: 2rem; background: var(--back);">
                    <h2 style="color: var(--accent);">CH·ª®NG CH·ªà HO√ÄN TH√ÄNH</h2>
                    <p>ƒê√£ ho√†n th√†nh: ${completed}/11 b√†i h·ªçc</p>
                    <p>Ng√†y: ${new Date().toLocaleDateString('vi-VN')}</p>
                    <p style="margin-top: 1rem;">üéâ Ch√∫c m·ª´ng b·∫°n ƒë√£ ho√†n th√†nh kh√≥a h·ªçc M·∫≠t m√£ h·ªçc!</p>
                </div>
            `;
        }

        const originalCheck = QuizSystem.checkAnswers.bind(QuizSystem);
        QuizSystem.checkAnswers = function() {
            const score = originalCheck();
            if (score >= 70) {
                LessonCore.markLessonComplete(11, score);
            }
        };
    </script>
</body>
</html>

